{% extends "base.html" %}
{% block content %}

<h2>{{ user.username }}'s Profile</h2>


<!-- Cover Banner -->
<div class="cover-container"
     style="background-image: url('{{ url_for('static', filename='cover_pics/' ~ (user.cover_image or 'default_cover.jpg')) }}');">
</div>





<!-- Profile Section -->
<div class="profile-header" style="display: flex; align-items: center; margin-top: -60px; padding-left: 20px;">
    <img src="{{ url_for('static', filename='profile_pics/' ~ user.profile_image) }}" 
         alt="Profile picture" class="profile-pic"
         style="width:120px; height:120px; border-radius:50%; border:4px solid white;">

    <div class="profile-info" style="margin-left: 20px;">
        <h2>{{ user.username }}</h2>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Member since:</strong> {{ user.date_joined.strftime('%B %d, %Y') }}</p>
        <a href="{{ url_for('main.edit_profile') }}" class="btn">Edit Profile</a>
    </div>
</div>

<hr>

<!-- User Stats -->
<div class="profile-stats">
    <h3>Stats</h3>
    <ul>
        <li><strong>Total Entries:</strong> {{ total_entries }}</li>
        <li><strong>Most Used Tags:</strong> 
            {% if most_common_tags %}
                {% for tag in most_common_tags %}
                    <a href="{{ url_for('main.dashboard', tag=tag) }}" class="tag-link">{{ tag }}</a>{% if not loop.last %}, {% endif %}
                {% endfor %}
            {% else %}
                No tags yet
            {% endif %}
        </li>

    </ul>
</div>

<hr>

<!-- Recent Entries -->
<div class="recent-entries">
    <h3>Recent Entries</h3>
    {% if recent_entries %}
        <ul>
            {% for entry in recent_entries %}
                <li>
                    <strong>{{ entry.title }}</strong> ({{ entry.date_posted.strftime('%Y-%m-%d') }})<br>
                    <small>{{ entry.content[:100] }}{% if entry.content|length > 100 %}...{% endif %}</small>
                </li>
            {% endfor %}
        </ul>
        <a href="{{ url_for('main.dashboard') }}" class="btn">View All Entries</a>
    {% else %}
        <p>No entries yet. <a href="{{ url_for('main.add_entry') }}">Add your first entry</a></p>
    {% endif %}
</div>

{% endblock %}
